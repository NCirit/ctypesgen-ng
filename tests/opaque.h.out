import ctypes
import ctypes.util
import os

os.environ['LIBRARY_PATH'] = os.path.dirname(os.path.abspath(__file__))
test_path = ctypes.util.find_library('test')
test = ctypes.CDLL(os.path.abspath(test_path))


class struct_handle(ctypes.Structure):
    pass

typedef_handle_t = struct_handle

struct_handle._pack_ = 1
struct_handle._fields_ = [
    ('name', ctypes.c_char_p),
]


class struct_opaque(ctypes.Structure):
    pass

typedef_opaque_t = ctypes.POINTER(struct_opaque)

test.opaque_new.restype = typedef_opaque_t
test.opaque_new.argtypes = []

test.opaque_free.restype = None
test.opaque_free.argtypes = [typedef_opaque_t]
